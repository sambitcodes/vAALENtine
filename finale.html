<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VvAALENtine</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/navigation.css">
    <link rel="stylesheet" href="css/finale.css">
    <script src="js/session.js"></script>
</head>

<body>
    <nav class="nav-bar">
        <div class="nav-container">
            <a href="home.html" class="nav-logo">
                <img src="/pictures/aal/aal-logo.jpg" alt="Logo" class="app-logo" loading="lazy">
                <span>vAALENtine</span>
            </a>
            <div class="nav-links">
                <a href="home.html" class="nav-link" onmouseenter="SoundFX.playHover()"
                    onclick="SoundFX.playClick()">Home</a>
                <a href="us.html" class="nav-link" onmouseenter="SoundFX.playHover()"
                    onclick="SoundFX.playClick()">Us</a>
                <a href="memories.html" class="nav-link" onmouseenter="SoundFX.playHover()"
                    onclick="SoundFX.playClick()">Memories</a>
                <a href="music.html" class="nav-link" onmouseenter="SoundFX.playHover()"
                    onclick="SoundFX.playClick()">Music</a>
                <a href="trivia.html" class="nav-link" onmouseenter="SoundFX.playHover()"
                    onclick="SoundFX.playClick()">Trivia</a>
                <a href="states.html" class="nav-link" onmouseenter="SoundFX.playHover()"
                    onclick="SoundFX.playClick()">Map</a>
                <a href="arcade.html" class="nav-link" onmouseenter="SoundFX.playHover()"
                    onclick="SoundFX.playClick()">Arcade</a>
                <a href="escape.html" class="nav-link" onmouseenter="SoundFX.playHover()"
                    onclick="SoundFX.playClick()">BuildUP</a>
                <a href="finale.html" class="nav-link active" onmouseenter="SoundFX.playHover()"
                    onclick="SoundFX.playClick()">Finale</a>
                <button onclick="SoundFX.playClick(); logout()" onmouseenter="SoundFX.playHover()"
                    class="nav-logout-btn">Logout</button>
            </div>
        </div>
    </nav>

    <section class="finale-section">
        <div class="bouquet-overlay"></div>
        <div id="backgroundLanterns" class="background-lanterns"></div>
        <div class="container">
            <div class="finale-content glass-morphism">
                <h2 class="finale-preheader">So ! Miss AALEN TALUKDAR</h2>
                <h1 class="finale-title">Will you be my valentine?</h1>
                <p class="finale-subheader">for one silly day.</p>

                <div class="finale-buttons" id="finaleButtons">
                    <button id="yesBtn" class="btn btn-yes" onmouseenter="SoundFX.playHover()">Yes</button>
                    <button id="noBtn" class="btn btn-no" onmouseenter="SoundFX.playHover()">No</button>
                </div>

                <!-- Floating Lantern Fallback Container -->
                <div id="fallbackLanternContainer" class="fallback-lantern-container hidden">
                    <div class="lantern-thread"></div>
                    <div class="lantern-body">
                        <button id="droppedNoBtn" class="btn btn-no lantern-btn"
                            onmouseenter="SoundFX.playHover()">No</button>
                    </div>
                </div>

                <audio id="bgMusic" loop>
                    <source src="pictures/finale.mp3" type="audio/mpeg">
                </audio>
                <audio id="glitchSound" loop>
                    <source src="pictures/glitch.mp3" type="audio/mpeg">
                </audio>
                <audio id="sirenSound" loop>
                    <source src="pictures/siren.mp3" type="audio/mpeg">
                </audio>
                <audio id="fireworksSound">
                    <source src="pictures/fireworks.mp3" type="audio/mpeg">
                </audio>

                <div class="finale-visual">
                    <img src="pictures/val.gif" alt="Valentine" class="finale-gif">
                </div>

                <p class="finale-note hidden" id="finaleNote">Jokes apart, answer honestly. I'll respect it.</p>
                <button id="reallyNoBtn" class="btn-really-no hidden" onmouseenter="SoundFX.playHover()">Really,
                    No</button>

                <div id="finaleResult" class="finale-result hidden">
                    <div class="finale-result-content">
                        <h3 id="finaleResultTitle"></h3>
                        <p id="finaleResultMessage"></p>
                        <a href="home.html" class="btn btn-primary" style="margin-top: 2rem;"
                            onmouseenter="SoundFX.playHover()" onclick="SoundFX.playClick()">Back to Home</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Self Destruct Overlay -->
        <div id="selfDestructOverlay" class="self-destruct-overlay hidden">
            <canvas id="matrixCanvas"></canvas>
            <div class="siren-overlay"></div>
            <div class="destruct-message-container">
                <h1 id="destructTitle" class="destruct-title glitch" data-text="CRITICAL ERROR">CRITICAL ERROR</h1>
                <p id="destructText" class="destruct-text">INITIATING SYSTEM PURGE...</p>
                <p id="destructCountdown" class="destruct-countdown"></p>
            </div>

            <div id="destructReveal" class="destruct-reveal hidden">
                <p class="reveal-text">I am not that intelligent a developer...</p>
                <p class="reveal-subtext">But I tried! Thank you for playing! ‚ù§Ô∏è</p>
                <a href="home.html" class="btn btn-primary reveal-btn">Escape to Home</a>
            </div>
        </div>
        <!-- Celebration Overlay -->
        <div id="celebrationOverlay" class="celebration-overlay hidden">
            <div class="celebration-content">
                <h1 class="celebration-title">Unbelievable! üíñ</h1>
                <p class="celebration-text">wow ! that was unbelieable<br>thank you so much for being my valentine</p>
                <p class="celebration-subtext">Happy Valentine's Day!</p>
                <a href="home.html" class="btn btn-primary celebration-btn">Go to our Home</a>
            </div>
        </div>
    </section>

    <audio id="cheeringSound">
        <source src="pictures/cheering.mp3" type="audio/mpeg">
    </audio>

    <canvas id="confettiCanvas"></canvas>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/finale.js"></script>
</body>

</html>